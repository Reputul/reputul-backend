# Spring config
spring.application.name=reputul-backend
spring.profiles.active=dev
server.port=8080
logging.level.com.reputul.backend.services.AutomationSchedulerService=DEBUG
logging.level.org.springframework.scheduling=DEBUG

# Database - provide defaults for development
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/reputul}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:password}
spring.datasource.driver-class-name=org.postgresql.Driver

# --- CORS ---
cors.allowed.origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000}

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# --- FLYWAY CONFIGURATION ---
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0
spring.flyway.validate-on-migrate=true
spring.flyway.clean-disabled=false

# JWT - provide default for development
jwt.secret=${JWT_SECRET:mySecretKey12345678901234567890123456789012345678901234567890}

# SendGrid - provide defaults (won't work but won't crash)
sendgrid.api.key=${SENDGRID_API_KEY:fake-key}
sendgrid.from.email=${SENDGRID_FROM_EMAIL:noreply@localhost.com}
sendgrid.from.name=${SENDGRID_FROM_NAME:Reputul}

# Base URL
app.base.url=${APP_BASE_URL:http://localhost:3000}

# Twilio - provide defaults (won't work but won't crash)
twilio.account_sid=${TWILIO_ACCOUNT_SID:fake-sid}
twilio.auth_token=${TWILIO_AUTH_TOKEN:fake-token}
twilio.phone_number=${TWILIO_PHONE_NUMBER:+14078185210}

# UPDATED: Business and Support Information for SMS Compliance
app.business.name=${APP_BUSINESS_NAME:Reputul}
app.support.phone=${APP_SUPPORT_PHONE:1-800-REPUTUL}
app.support.email=${APP_SUPPORT_EMAIL:support@reputul.com}

# --- STRIPE CONFIGURATION ---
stripe.secret.key=${STRIPE_SECRET_KEY:sk_test_fake_key}
stripe.webhook.secret=${STRIPE_WEBHOOK_SECRET:whsec_fake_secret}
stripe.price.solo=${STRIPE_PRICE_SOLO:price_fake_solo}
stripe.price.pro=${STRIPE_PRICE_PRO:price_fake_pro}
stripe.price.growth=${STRIPE_PRICE_GROWTH:price_fake_growth}
stripe.price.sms.metered=${STRIPE_PRICE_SMS_METERED:price_fake_sms}
stripe.coupon.100.off=${STRIPE_COUPON_100_OFF:100-percent-off}
stripe.coupon.50.off=${STRIPE_COUPON_50_OFF:50-percent-off}
frontend.url=${FRONTEND_URL:http://localhost:3000}
billing.portal.return.url=${BILLING_PORTAL_RETURN_URL:}

# Beta promo codes
beta.promo.codes=${BETA_PROMO_CODES:BETA2024,EARLYACCESS,LAUNCH50}

# SMS Settings
sms.enabled=${SMS_ENABLED:false}
sms.daily_limit=${SMS_DAILY_LIMIT:100}
sms.rate_limit_per_hour=${SMS_RATE_LIMIT_PER_HOUR:50}
sms.default_country_code=${SMS_DEFAULT_COUNTRY_CODE:+1}

sms.template.max_length=1600
sms.template.single_sms_limit=160
sms.template.unicode_limit=70

sms.delivery.retry_attempts=3
sms.delivery.retry_delay_seconds=30
sms.delivery.timeout_seconds=300

sms.webhook.enabled=true
sms.webhook.base_url=${SMS_WEBHOOK_BASE_URL:http://localhost:8080}
sms.webhook.secret=${SMS_WEBHOOK_SECRET:defaultSecret}

sms.logging.mask_phone_numbers=true
sms.logging.log_message_content=false
sms.logging.log_delivery_status=true


convertkit.api.key=${CONVERTKIT_API_KEY}
convertkit.form.id.waitlist=${CONVERTKIT_FORM_ID_WAITLIST}
convertkit.tag.name=${CONVERTKIT_TAG_NAME}

# Debug logging for Flyway
logging.level.org.flywaydb=DEBUG